# -------------------------------------------------
# Cilium – Single Node / Homelab / ArgoCD Friendly
# -------------------------------------------------

kubeProxyReplacement: true

# REQUIRED for kube-proxy replacement
k8sServiceHost: 192.168.0.83
k8sServicePort: 6443

# -------------------------------------------------
# Networking
# -------------------------------------------------
routingMode: native
autoDirectNodeRoutes: true

# REQUIRED when routingMode=native
ipv4NativeRoutingCIDR: 10.42.0.0/16

ipv4:
  enabled: true
ipv6:
  enabled: false

# Pod → Internet (NAT)
enableIPv4Masquerade: true
enableIPv6Masquerade: false

# -------------------------------------------------
# IPAM
# -------------------------------------------------
ipam:
  mode: cluster-pool
  operator:
    clusterPoolIPv4PodCIDRList:
      - 10.42.0.0/16

# -------------------------------------------------
# DNS (REQUIRED for cert-manager)
# -------------------------------------------------
dnsProxy:
  enabled: true

# -------------------------------------------------
# CNI
# -------------------------------------------------
cni:
  exclusive: true

# -------------------------------------------------
# LoadBalancer + L2 Announcements
# -------------------------------------------------
l2announcements:
  enabled: true

externalIPs:
  enabled: true

loadBalancer:
  algorithm: maglev

# Optional static IP assignment (recommended)
ingressController:
  enabled: false
  default: true
  loadbalancerMode: shared
  service:
    annotations:
      io.cilium/lb-ipam-ips: 192.168.0.224

# -------------------------------------------------
# Gateway API
# -------------------------------------------------
gatewayAPI:
  enabled: true
  enableAlpn: false

# -------------------------------------------------
# Hubble
# -------------------------------------------------
hubble:
  enabled: true
  relay:
    enabled: true
  ui:
    enabled: true

# -------------------------------------------------
# Operator
# -------------------------------------------------
operator:
  replicas: 1
  resources:
    limits:
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

# -------------------------------------------------
# Agent resources
# -------------------------------------------------
resources:
  limits:
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# -------------------------------------------------
# Security / Compatibility
# -------------------------------------------------
enableRuntimeDeviceDetection: true
enableBPFMasquerade: true

# -------------------------------------------------
# NodePort (safe fallback)
# -------------------------------------------------
nodePort:
  enabled: true

# -------------------------------------------------
# Debug
# -------------------------------------------------
debug:
  enabled: false
