# -------------------------------------------------
# Cilium – Single Node / Homelab / ArgoCD Friendly
# -------------------------------------------------

kubeProxyReplacement: true

# Required for kube-proxy replacement
k8sServiceHost: ""
k8sServicePort: 6443

# -------------------------------------------------
# Networking
# -------------------------------------------------
routingMode: native
autoDirectNodeRoutes: true

ipv4:
  enabled: true
ipv6:
  enabled: false

# Enable NAT so pods can reach the internet
enableIPv4Masquerade: true
enableIPv6Masquerade: false

# IPAM
ipam:
  mode: cluster-pool
  operator:
    clusterPoolIPv4PodCIDRList:
      - 10.42.0.0/16

# -------------------------------------------------
# DNS – THIS FIXES YOUR ISSUE
# -------------------------------------------------
dnsProxy:
  enabled: true

# -------------------------------------------------
# CNI
# -------------------------------------------------
cni:
  exclusive: true

# -------------------------------------------------
# Hubble (Optional but useful)
# -------------------------------------------------
hubble:
  enabled: true
  relay:
    enabled: true
  ui:
    enabled: true

# -------------------------------------------------
# Operator
# -------------------------------------------------
operator:
  replicas: 1

# -------------------------------------------------
# Resources (safe defaults for 1 node)
# -------------------------------------------------
resources:
  limits:
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

operator:
  resources:
    limits:
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

# -------------------------------------------------
# Security / Compatibility
# -------------------------------------------------
enableRuntimeDeviceDetection: true
enableBPFMasquerade: true

# -------------------------------------------------
# Observability
# -------------------------------------------------
prometheus:
  enabled: false

# -------------------------------------------------
# NodePort (optional)
# -------------------------------------------------
nodePort:
  enabled: true

# -------------------------------------------------
# Debug (disable unless needed)
# -------------------------------------------------
debug:
  enabled: false
